# CHAPTER3 운영체제
## SECTION1 운영체제와 컴퓨터
- 운영체제(OS, Operating System)
  - 사용자가 컴퓨터를 쉽게 다루게 해주는 인터페이스
  - 한정된 메모리나 시스템 자원을 효율적으로 분배
  - cf) 펌웨어(firmware) : 소프트웨어를 추가로 설치할 수 없는 것

### 3.1.1 운영체제의 역할과 구조
#### 운영체제의 역할
- CPU 스케줄링과 프로세스 관리
  - CPU 소유권을 어떤 프로세스에 할당할지, 프로세스의 생성과 삭제, 자원 할당 및 반환을 관리
- 메모리 관리
  - 한정된 메모리를 어떤 프로셋에 얼마큼 할당해야하는지 관리
- 디스크 파일 관리
  - 디스크 파일을 어떠한 방법으로 보관할지 관리
- I/O 디바이스 관리
  - I/O 디바이스들인 마우스, 키보드와 컴퓨터 간에 데이터를 주고받는 것을 관리

#### 운영체제의 구조
![운영체제의 구조](https://velog.velcdn.com/images/ank0425/post/ce9b8d43-8532-4244-9d47-ab36ba6f1265/image.png)

- 시스템콜
  - 운영체제가 커널에 접근하기 위한 인터페이스
  - 유저 프로그램이 운영체제의 서비스를 받기 위해 커널 함수를 호출할 때 사용
  - 프로세스나 스레드에서 운영체제로 어떠한 요청을 할 때 시스템콜이라는 인터페이스와 커널을 거쳐 운영체제에 전달
  - 하나의 추상화 계층
  - 장점 : 네트워크 통신이나 데이터베이스와 같은 낮은 단계의 영역 처리에 대한 부분을 많이 신경 쓰지 않고 프로그램을 구현가능
  - modebit : 플래그 변수
    - 유저모드와 커널모드 구분

### 3.1.2 컴퓨터의 요소
- CPU, DMA 컨트롤러, 메모리, 타이머, 디바이스 컨트롤러

- CPU(Central Processing Unit) : 컴퓨터장치, 인터럽트에 의해 단순히 메모리에 존재하는 명령어를 해석해서 실행하는 일꾼
  - 제어장치(CU, Control Unit)
    - 프로세스 조작을 지시한는 CPU의 한 부품
    - 입출력장치 간 통신 제어
    - 명령어들을 읽고 해석
    - 데이터 처리를 위한 순서 결정

  - 레지스터
    - CPU 안에 있는 매우 빠른 임시기억장치
    - CPU와 직접 연결 -> 연산 속도가 메모리보다 빠름
    - CPU 데이터 저장시 거쳐감

  - 산술논리연산장치(ALU, Arithmetic Logic Unit)
    - 덧셈, 뺄셈 같은 두 숫자의 산술 연산과 배타적 논리합, 논리곱 같은 논리 연산을 계산하는 디지털 회로

  - 인터럽트
    - 어떤 신호가 들어왔을 떄 CPU를 잠깐 정지시키는 것
    - IO 디바이스로 인한 인터럽트, 0으로 숫자를 나누는 산술 연산에서의 인터럽트, 프로세스 오류 등으로 발생
    - 인터럽트 발생시 인터럽트 핸들러 함수가 모여있는 인터럽트 벡터로 가서 인터럽트 핸드러 함수 실행
    - 인터럽트간 우선순위, 우선순위에 따라 실행
    - 하드웨어 인터럽트
      - IO 디바이스에서 발생하는 인터럽트
      - ex) 키보드, 마우스
    - 소프트웨어 인터럽트
      - (= 트랩, trap)
      - 프로세스 오류 등으로 프로세스가 시스템콜을 호출할 때 발동

- DMA 컨트롤러
  - I/O 디바이스가 메모리에 직접 접근할 수 있도록 하는 하드웨어 장치
  -  CPU 부하를 막아주며 CPU의 일을 부담하는 보조 일꾼
  -  하나의 작업을 CPU와 DMA 컨트롤러가 동시에 하는 것 방지

- 메모리
  - 전자회로에서 데이터나 상태, 명령어 등을 기록하는 장치
  - 보통 RAM(Random Access Memory)을 일컬어 메모리라고 함

- 타이머
  - 몇 초 안에는 작업이 끝나야 한다는 것을 정하고 특정 프로그램에 시간제한을 다는 역할
  - 시간이 많이 걸리는 프로그램이 작동할 때 제한을 걸기 위해 존재

- 디바이스 컨트롤러
  - 컴퓨터와 연결되어 있는 IO 디바이스들의 작은 CPU
  - 로컬 버퍼
    - 옆에 붙어있음
    - 각 디바이스에서 데이터를 임시로 저장하기위한 작은 메모리
## SECTION2 메모리
### 3.2.1 메모리 계층
- 레지스터, 캐시, 메모리, 저장장치
![메모리 계층](https://velog.velcdn.com/images%2Fyu-jin-song%2Fpost%2Ff9c8088c-0fec-4dad-ac95-ddf3601aa1d4%2F%EB%A9%94%EB%AA%A8%EB%A6%AC_%EA%B3%84%EC%B8%B5_%EA%B5%AC%EC%A1%B0.png)
- 레지스터
  - CPU안에 있는 작은 메모리
  - 휘발성
  - 속도 가장 빠름
  - 기억용량 가장 적음
- 캐시
  - L1, L2 캐시 지칭
  - 휘발성
  - 속도 빠름
  - 기억 용량이 적음
- 주기억장치
  - RAM을 가르킴
  - 휘발성
  - 속도 보통
  - 기억 용량 보통
- 보조기억장치
  - HDD, SSD
  - 비휘발성
  - 속도 낮음
  - 기억 용량 많음

#### 캐시(cache)
- 데이터를 미리 복사해 놓은 임시 저장소이자 빠른 장치와 느린 장치에서 속도 차이에 따른 병목 현상을 줄이기 위한 메모리
- 데이터를 접근하는 시간이 오래 걸리는 경우 해결
- 무언가를 다시 계산하는 시간 절약가능

- 지역성의 원리 : 자주 사용하는 데이터를 기반으로 설정
  - 시간 지역성(temporal locality)
    - 최근 사용한 데이터를 다시 접근하려는 특성
  - 공간 지역성(spatial locality)
    - 최근 접근한 데이터를 이루고 있는 공간이나 그 가까운 공간에 접근하는 특성

#### 캐시히트와 캐시미스
- 캐시히트
  - 캐시에서 원하는 데이터를 찾은 경우
  - 해당 데이터를 제어장치를 거쳐 가져오게 됨
  - 위치 가깝
  - CPU 내부 버스를 기반으로 작동 -> 빠름
- 캐시미스
  - 해당 데이터가 캐시에 없어 주메모리로 가서 데이터를 찾아오는 것
  - 시스템 버스를 기반으로 작동하기 때문에 느림

#### 캐시매핑
- 캐시가 히트되기 위해 매핑하는 방법
- 직접 매핑
  - 처리가 빠르지만 총돌 발생이 잦음
- 연관 매핑
  - 순서를 일치시키지 않고 관련 있는 캐시와 메모리 매핑
  - 충돌이 적지만 모든 블록을 탐색해야 해서 속도가 느림
- 집합 연관 매핑
  - 직접 매핑 + 연관 매핑
  - 집합을 둬서 저장하며 블록화되어 있음
  - 검색이 좀 더 효율적

#### 웹 브라우저의 캐시
- 쿠키
  - 만료기한이 있는 키-값 저장소
  - same site 옵션을 strict로 설저하지 않았을 경우 다르 도메인에서 요청했을 떄 자동 전송
  - 4KB까지 데이터 저장
  - 만료기한 정할 수 있음
  - 쿠키 설정시 document.cookie로 쿠키를 볼 수 없게 httponly 옵션을 거는 것 중요
  - 보통 서버에서 만료기한 정함

- 로컬 스토리지
  - 만료기한이 없는 키-값 저장소
  - 10MB까지 저장
  - 웹 브라우저를 닫아도 유지되고 도메인 단위로 저장,생성
  - 클라이언트에서만 수정 가능

- 세션 스토리지
  - 만료기한이 없는 키-값 저장소
  - 탭 단위로 세션 스토리지 생성
  - 탭을 닫을 때 해당 데이터 삭제
  - 5MB까지 저장가능
  - 클라이언트에서만 수정 가능

#### 데이터베이스의 캐싱 계층
- 메인 데이터베이스 위에 레디스(REDIS) 데이터베이스 계층을 '캐싱 계층'으로 둬서 성능 향상

### 3.2.2 메모리 관리

## SECTION3 프로세스와 스레드
### 3.3.1 프로세스와 컴파일 과정
### 3.3.2 프로세스의 상태
### 3.3.3 프로세스의 메모리 구조
### 3.3.4 PCB
### 3.3.5 멀티프로세싱
### 3.3.6 스레드와 멀티스레딩
### 3.3.7 공유 자원과 임계 영역
### 3.3.8 교착 상태

## SECTION4 CPU 스케쥴링 알고리즘
### 3.4.1 비선점형 방식
### 3.4.2 선점형 방식
